(define (domain mazenamo)
    (:requirements :strips :typing)
    (:types obstacle robot pos)
    (:predicates
        (upon ?o1 - obstacle ?o2 - obstacle)
        (onGround ?o - obstacle)
        (clear ?o - obstacle)
        (holding ?r - robot ?o - obstacle)
        (handempty)
        (dirIsUp ?r - robot)
        (dirIsDown ?r - robot)
        (dirIsLeft ?r - robot)
        (dirIsRight ?r - robot)
        (rAt ?r - robot ?p - pos)
        (oAt ?o - obstacle ?p - pos)
        (upTo ?p1 - pos ?p2 - pos)
        (downTo ?p1 - pos ?p2 - pos)
        (leftTo ?p1 - pos ?p2 - pos)
        (rightTo ?p1 - pos ?p2 - pos)
        (isHeavy ?o - obstacle)
        (isLight ?o - obstacle)
        (isMoveable ?o - obstacle)
        (posEmpty ?p - pos)
    )

    ; Turn left
    (:action TurnLeftWhenUp
        :parameters (?r - robot)
        :precondition (and
            (dirIsUp ?r)
        )
        :effect (and
            (dirIsLeft ?r)
            (not (dirIsUp ?r))
        )
    )
    (:action TurnLeftWhenDown
        :parameters (?r - robot)
        :precondition (and 
            (dirIsDown ?r)
        )
        :effect (and 
            (dirIsRight ?r)
            (not (dirIsDown ?r))
        )
    )
    (:action TurnLeftWhenLeft
        :parameters (?r - robot)
        :precondition (and 
            (dirIsLeft ?r)
        )
        :effect (and 
            (dirIsDown ?r)
            (not (dirIsLeft ?r))
        )
    )
    (:action TurnLeftWhenRight
        :parameters (?r - robot)
        :precondition (and 
            (dirIsRight ?r)
        )
        :effect (and 
            (dirIsUp ?r)
            (not (dirIsRight ?r))
        )
    )

    ; Turn right
    (:action TurnRightWhenUp
        :parameters (?r - robot)
        :precondition (and
            (dirIsUp ?r)
        )
        :effect (and
            (dirIsRight ?r)
            (not (dirIsUp ?r))
        )
    )
    (:action TurnRightWhenDown
        :parameters (?r - robot)
        :precondition (and 
            (dirIsDown ?r)
        )
        :effect (and 
            (dirIsLeft ?r)
            (not (dirIsDown ?r))
        )
    )
    (:action TurnRightWhenLeft
        :parameters (?r - robot)
        :precondition (and 
            (dirIsLeft ?r)
        )
        :effect (and 
            (dirIsUp ?r)
            (not (dirIsLeft ?r))
        )
    )
    (:action TurnRightWhenRight
        :parameters (?r - robot)
        :precondition (and 
            (dirIsRight ?r)
        )
        :effect (and 
            (dirIsDown ?r)
            (not (dirIsRight ?r))
        )
    )

    ; Move forward
    (:action MoveForwardWhenUp
        :parameters (?r - robot ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsUp ?r)
            (rAt ?r ?p1)
            (upTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )
    (:action MoveForwardWhenDown
        :parameters (?r - robot ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsDown ?r)
            (rAt ?r ?p1)
            (downTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )
    (:action MoveForwardWhenLeft
        :parameters (?r - robot ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsLeft ?r)
            (rAt ?r ?p1)
            (leftTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )
    (:action MoveForwardWhenRight
        :parameters (?r - robot ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsRight ?r)
            (rAt ?r ?p1)
            (rightTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )

    ; Push obstacle
    (:action PushObstacleWhenUp
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos ?p3 - pos)
        :precondition (and
            (dirIsUp ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (upTo ?p2 ?p1)
            (upTo ?p3 ?p2)
            (posEmpty ?p3)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
        )
        :effect (and
            (oAt ?o ?p3)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (posEmpty ?p3))
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )
    (:action PushObstacleWhenDown
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos ?p3 - pos)
        :precondition (and
            (dirIsDown ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (downTo ?p2 ?p1)
            (downTo ?p3 ?p2)
            (posEmpty ?p3)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
        )
        :effect (and
            (oAt ?o ?p3)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (posEmpty ?p3))
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )
    (:action PushObstacleWhenLeft
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos ?p3 - pos)
        :precondition (and
            (dirIsLeft ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (leftTo ?p2 ?p1)
            (leftTo ?p3 ?p2)
            (posEmpty ?p3)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
        )
        :effect (and
            (oAt ?o ?p3)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (posEmpty ?p3))
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )
    (:action PushObstacleWhenRight
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos ?p3 - pos)
        :precondition (and
            (dirIsRight ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (rightTo ?p2 ?p1)
            (rightTo ?p3 ?p2)
            (posEmpty ?p3)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
        )
        :effect (and
            (oAt ?o ?p3)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (posEmpty ?p3))
            (rAt ?r ?p2)
            (not (rAt ?r ?p1))
        )
    )

    ; Pickup
    (:action PickUpFromGroundWhenUp
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsUp ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (upTo ?p2 ?p1)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
            (isLight ?o)
        )
        :effect (and
            (holding ?r ?o)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (handempty))
            (not (onGround ?o))
        )
    )
    (:action PickUpFromGroundWhenDown
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsDown ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (downTo ?p2 ?p1)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
            (isLight ?o)
        )
        :effect (and
            (holding ?r ?o)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (handempty))
            (not (onGround ?o))
        )
    )
    (:action PickUpFromGroundWhenLeft
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsLeft ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (leftTo ?p2 ?p1)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
            (isLight ?o)
        )
        :effect (and
            (holding ?r ?o)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (handempty))
            (not (onGround ?o))
        )
    )
    (:action PickUpFromGroundWhenRight
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsRight ?r)
            (rAt ?r ?p1)
            (oAt ?o ?p2)
            (rightTo ?p2 ?p1)
            (handempty)
            (onGround ?o)
            (clear ?o)
            (isMoveable ?o)
            (isLight ?o)
        )
        :effect (and
            (holding ?r ?o)
            (not (oAt ?o ?p2))
            (posEmpty ?p2)
            (not (handempty))
            (not (onGround ?o))
        )
    )

    (:action PickUpFromObstacleWhenUp
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsUp ?r)
            (rAt ?r ?p1)
            (oAt ?o1 ?p2)
            (oAt ?o2 ?p2)
            (upon ?o1 ?o2)
            (upTo ?p2 ?p1)
            (handempty)
            (clear ?o1)
            (isMoveable ?o1)
            (isLight ?o1)
        )
        :effect (and
            (holding ?r ?o1)
            (not (oAt ?o1 ?p2))
            (not (upon ?o1 ?o2))
            (clear ?o2)
            (not (handempty))
        )
    )
    (:action PickUpFromObstacleWhenDown
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsDown ?r)
            (rAt ?r ?p1)
            (oAt ?o1 ?p2)
            (oAt ?o2 ?p2)
            (upon ?o1 ?o2)
            (downTo ?p2 ?p1)
            (handempty)
            (clear ?o1)
            (isMoveable ?o1)
            (isLight ?o1)
        )
        :effect (and
            (holding ?r ?o1)
            (not (oAt ?o1 ?p2))
            (not (upon ?o1 ?o2))
            (clear ?o2)
            (not (handempty))
        )
    )
    (:action PickUpFromObstacleWhenLeft
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsLeft ?r)
            (rAt ?r ?p1)
            (oAt ?o1 ?p2)
            (oAt ?o2 ?p2)
            (upon ?o1 ?o2)
            (leftTo ?p2 ?p1)
            (handempty)
            (clear ?o1)
            (isMoveable ?o1)
            (isLight ?o1)
        )
        :effect (and
            (holding ?r ?o1)
            (not (oAt ?o1 ?p2))
            (not (upon ?o1 ?o2))
            (clear ?o2)
            (not (handempty))
        )
    )
    (:action PickUpFromObstacleWhenRight
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsRight ?r)
            (rAt ?r ?p1)
            (oAt ?o1 ?p2)
            (oAt ?o2 ?p2)
            (upon ?o1 ?o2)
            (rightTo ?p2 ?p1)
            (handempty)
            (clear ?o1)
            (isMoveable ?o1)
            (isLight ?o1)
        )
        :effect (and
            (holding ?r ?o1)
            (not (oAt ?o1 ?p2))
            (not (upon ?o1 ?o2))
            (clear ?o2)
            (not (handempty))
        )
    )

    ; Place down
    (:action PlaceOnGroundWhenUp
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsUp ?r)
            (rAt ?r ?p1)
            (holding ?r ?o)
            (upTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (oAt ?o ?p2)
            (not (posEmpty ?p2))
            (not (holding ?r ?o))
            (handempty)
            (onGround ?o)
        )
    )
    (:action PlaceOnGroundWhenDown
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsDown ?r)
            (rAt ?r ?p1)
            (holding ?r ?o)
            (downTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (oAt ?o ?p2)
            (not (posEmpty ?p2))
            (not (holding ?r ?o))
            (handempty)
            (onGround ?o)
        )
    )
    (:action PlaceOnGroundWhenLeft
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsLeft ?r)
            (rAt ?r ?p1)
            (holding ?r ?o)
            (leftTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (oAt ?o ?p2)
            (not (posEmpty ?p2))
            (not (holding ?r ?o))
            (handempty)
            (onGround ?o)
        )
    )
    (:action PlaceOnGroundWhenRight
        :parameters (?r - robot ?o - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsRight ?r)
            (rAt ?r ?p1)
            (holding ?r ?o)
            (rightTo ?p2 ?p1)
            (posEmpty ?p2)
        )
        :effect (and
            (oAt ?o ?p2)
            (not (posEmpty ?p2))
            (not (holding ?r ?o))
            (handempty)
            (onGround ?o)
        )
    )

    (:action PlaceOnObstacleWhenUp
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsUp ?r)
            (rAt ?r ?p1)
            (oAt ?o2 ?p2)
            (holding ?r ?o1)
            (upTo ?p2 ?p1)
            (clear ?o2)
            (isHeavy ?o2)
        )
        :effect (and
            (oAt ?o1 ?p2)
            (not (holding ?r ?o1))
            (handempty)
            (not (clear ?o2))
            (upon ?o1 ?o2)
        )
    )
    (:action PlaceOnObstacleWhenDown
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsDown ?r)
            (rAt ?r ?p1)
            (oAt ?o2 ?p2)
            (holding ?r ?o1)
            (downTo ?p2 ?p1)
            (clear ?o2)
            (isHeavy ?o2)
        )
        :effect (and
            (oAt ?o1 ?p2)
            (not (holding ?r ?o1))
            (handempty)
            (not (clear ?o2))
            (upon ?o1 ?o2)
        )
    )
    (:action PlaceOnObstacleWhenLeft
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsLeft ?r)
            (rAt ?r ?p1)
            (oAt ?o2 ?p2)
            (holding ?r ?o1)
            (leftTo ?p2 ?p1)
            (clear ?o2)
            (isHeavy ?o2)
        )
        :effect (and
            (oAt ?o1 ?p2)
            (not (holding ?r ?o1))
            (handempty)
            (not (clear ?o2))
            (upon ?o1 ?o2)
        )
    )
    (:action PlaceOnObstacleWhenRight
        :parameters (?r - robot ?o1 - obstacle ?o2 - obstacle ?p1 - pos ?p2 - pos)
        :precondition (and
            (dirIsRight ?r)
            (rAt ?r ?p1)
            (oAt ?o2 ?p2)
            (holding ?r ?o1)
            (rightTo ?p2 ?p1)
            (clear ?o2)
            (isHeavy ?o2)
        )
        :effect (and
            (oAt ?o1 ?p2)
            (not (holding ?r ?o1))
            (handempty)
            (not (clear ?o2))
            (upon ?o1 ?o2)
        )
    )
)